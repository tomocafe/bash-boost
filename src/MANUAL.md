---
title: BASH-BOOST(1)
author: github.com/tomocafe
date: January 5, 2022
---


# Package cli/arg

Routines for parsing command line arguments

## `bb_addopt [SHORTNAME:]LONGNAME [DESCRIPTION] [DEFAULT]`

Adds a command line option to be parsed

**Arguments:**

- `SHORTNAME`: optional single character, e.g. "f" for an -f FOO option
- `LONGNAME`: required long name, e.g. "foo" for a --foo FOO option
- `DESCRIPTION`: description of the option used in help
- `DEFAULT`: the default value of the option if not given in the command line

**Notes:**

-h and --help are reserved for automatically-generated
command usage and help

## `bb_addflag [SHORTNAME:]LONGNAME [DESCRIPTION]`

Adds a command line flag to be parsed

**Arguments:**

- `SHORTNAME`: optional single character, e.g. "f" for an -f flag
- `LONGNAME`: required long name, e.g. "foo" for a --foo flag
- `DESCRIPTION`: description of the option used in help

**Notes:**

-h and --help are reserved for automatically-generated
command usage and help

## `bb_argusage`

Print the command line usage string

## `bb_arghelp`

Print the command line help

**Notes:**

Includes the usage string and a list of flags and options with their
descrptions.

## `bb_errusage MESSAGE [RETURNVAL]`

Issues an error message, prints the command usage, and exits the shell

**Arguments:**

- `MESSAGE`: error message to be printed
- `RETURNVAL`: return code to exit with (defaults to 1)

## `bb_isflag LONGNAME`

Check if LONGNAME is a registered flag (not an option)

**Returns:** 0 if LONGNAME is a flag, 1 otherwise (i.e. it is an option)

## `bb_setprog PROGNAME`

Sets the name of the program for printing usage and help

**Arguments:**

- `PROGNAME`: name of the program

## `bb_setpositional NAME DESCRIPTION`

Sets the name and description of the positional arguments

**Arguments:**

- `NAME`: one-word name of the positional arguments (auto-capitalized)
- `DESCRIPTION`: description of the positionals used in help

## `bb_parseargs ARGS`

Parses command line arguments after registering valid flags and options

**Arguments:**

- `ARGS`: the list of command line arguments, usually "$@"

**Notes:**

Check flags with checkopt LONGNAME
Get option setting values with getopt LONGNAME
Get positional arguments with ${BB_POSARGS[@]} array
If the last argument is a single dash (-), read remaining arguments from stdin

## `bb_getopt [-v VAR] LONGNAME`

Gets the value of option named LONGNAME

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `LONGNAME`: long name of the option

## `bb_checkopt LONGNAME`

Returns the value of flag named LONGNAME

**Arguments:**

- `LONGNAME`: long name of the flag

**Returns:** the flag value

## `bb_argclear`

Clears all registered argument parsing settings

**Notes:**

Only one "command" can be registered for parsing at once
so this can be used to clear the state of a previous command
and start a new one

# Package cli/color

Routines for printing text in color using ANSI escape codes

## `bb_colorize COLORSTR TEXT`

Prints the given text in color if outputting to a terminal

**Arguments:**

- `COLORSTR`: FGCOLOR[_on_[BGCOLOR]] (e.g. red, bright_red, white_on_blue)
- `TEXT`: text to be printed in color

**Returns:** 0 if text was printed in color, 1 otherwise

**Notes:**

Supported colors:
- black
- red
- green
- yellow
- blue
- magenta
- cyan
- bright_gray (dark_white)
- gray (bright_black)
- bright_red
- bright_green
- bright_yellow
- bright_blue
- bright_magenta
- bright_cyan
- white (bright_white)

This does not print a new line at the end of TEXT

## `bb_rawcolor COLORSTR TEXT`

Like colorize but always uses prints in color

**Arguments:**

- `COLORSTR`: FGCOLOR[_on_[BGCOLOR]] (e.g. red, bright_red, white_on_blue)
- `TEXT`: text to be printed in color

**Notes:**

Use this instead of colorize if you need to still print in color even if
not connected to a terminal, e.g. when saving the output to a variable.
See colorize for supported colors

## `bb_colorstrip TEXT`

Strips ANSI color codes from text colorized by colorize (or rawcolor)

**Arguments:**

- `TEXT`: text possibly with color escape codes to be removed

**Notes:**

This is only guaranteed to work on text generated by colorize 
and variants, not for any generic string with ANSI escape codes.

# Package cli/input

Routines for handling user input

## `bb_getinput VAR PROMPT`

Prompts for input and saves the response to VAR

**Arguments:**

- `VAR`: variable to store response into (do not include $)
- `PROMPT`: text displayed to the user

## `bb_yn PROMPT`

Prompts user to confirm an action by pressing Y

**Arguments:**

- `PROMPT`: text displayed to the user

**Returns:** 0 if yes, 1 otherwise

**Notes:**

If you want the user to type "yes", use getinput
and check their response

## `bb_pause PROMPT`

Prompts user to press a key to continue

**Arguments:**

- `PROMPT`: text displayed to the user
Default: Press any key to continue

# Package cli/msg

Messaging routines

## `bb_info MESSAGE`

Prints an informational message to stderr

**Arguments:**

- `MESSAGE`: message to be printed

## `bb_warn MESSAGE`

Prints a warning message to stderr

**Arguments:**

- `MESSAGE`: message to be printed

## `bb_error MESSAGE`

Prints an error message to stderr

**Arguments:**

- `MESSAGE`: message to be printed

## `bb_fatal MESSAGE [RETURNCODE]`

Prints an error message to stderr and then exits the shell

**Arguments:**

- `MESSAGE`: message to be printed
- `RETURNCODE`: return code to exit with (defaults to 1)

## `bb_expect VAL1 VAL2 [MESSAGE] [RETURNCODE]`

Issues a fatal error if two given values are not equal

**Arguments:**

- `VAL1`: value to check
- `VAL2`: value to check against (golden answer)
- `MESSAGE`: optional prefix to the error message
- `RETURNCODE`: return code to exit with (defaults to 1)

## `bb_expectsubstr VAL1 VAL2 [MESSAGE] [RETURNCODE]`

Issues a fatal error if a given substring is not found in some given text

**Arguments:**

- `VAL1`: text to check
- `VAL2`: substring to be found
- `MESSAGE`: optional prefix to the error message
- `RETURNCODE`: return code to exit with (defaults to 1)

# Package core

Core routines

## `bb_load PKG ...`

Loads a module or package

**Arguments:**

- `PKG`: either a package (e.g. cli/arg) or a whole module (e.g. cli)

**Notes:**

Each package only loads once; if you happen to load one twice, the second 
time has no effect

## `bb_isloaded PKG`

Checks if a package is loaded already

**Arguments:**

- `PKG`: package name in internal format, e.g. bb_cli_arg

**Returns:** 0 if loaded, 1 otherwise

## `bb_debug TEXT`

Log text when debugging is enabled

**Arguments:**

- `TEXT`: message to be logged in debug mode

**Notes:**

Set environment variable BB_DEBUG to enable debug mode

## `bb_issourced`

Check if the script is being sourced

**Returns:** 0 if sourced, 1 otherwise

## `bb_stacktrace`

Print a stack trace to stderr

## `bb_cleanup`

Clears all functions and variables defined by bash-boost

# Package interactive/cmd

Miscellaneous interactive commands

## `bb_mcd DIR`

Make director(ies) and change directory to the last one

**Arguments:**

- `DIR`: usually a single directory to be made, but all arguments are passed to 
mkdir and the last argument is then passed to cd if mkdir is successful

## `bb_up [DIR]`

Change directory up

**Arguments:**

- `DIR`: go to this directory, otherwise defaults to .. if no DIR specified

**Notes:**

Most useful with the associated command completion. After pressing TAB,
the current working directory is populated, and with each further TAB,
a directory is removed, moving you up the directory stack. Once you see
the upward directory you want to go to, hit ENTER

## `bb_forkterm [ARGS ...]`

Spawn a new terminal instance inheriting from this shell's environment

**Arguments:**

- `ARGS`: arguments to be appended to the terminal launch command

**Notes:**

Uses the BB_TERMINAL or TERMINAL environment variable as the command
to launch the new terminal instance. Sets the BB_FORKDIR variable
for the spawned shell to read. In your shell init file, you can 
detect when this variable is set and change to this directory, if
desired.

# Package interactive/prompt

Routines for managing a dynamic shell prompt

## `bb_loadprompt`

Activates the registered dynamic prompt

## `bb_unloadprompt`

Deactivates the registered dynamic prompt

**Notes:**

This will restore the prompt to the state it was in
when loadprompt was called

## `bb_setpromptleft FUNCTION ...`

Sets the left prompt to the output of the list of given functions

**Arguments:**

- `FUNCTION`: a function whose stdout output will be added to the prompt

**Notes:**

The prompt areas are as follows:
```
+----------------------------------------+
| left prompt               right prompt |
| nextline prompt                        |
+----------------------------------------+
```

## `bb_setpromptright FUNCTION ...`

Sets the right prompt to the output of the list of given functions

**Arguments:**

- `FUNCTION`: a function whose stdout output will be added to the prompt

## `bb_setpromptnextline FUNCTION ...`

Sets the next line prompt to the output of the list of given functions

**Arguments:**

- `FUNCTION`: a function whose stdout output will be added to the prompt

## `bb_setwintitle FUNCTION`

Sets the window title to the output of the list of given functions

**Arguments:**

- `FUNCTION`: a function whose stdout output will used as the window title

## `bb_settabtitle FUNCTION`

Sets the tab title to the output of the list of given functions

**Arguments:**

- `FUNCTION`: a function whose stdout output will used as the tab title

**Notes:**

Not all terminals support this

## `bb_promptcolor COLORSTR TEXT`

Prints text in color, for use specifically in prompts

**Arguments:**

- `COLORSTR`: valid color string, see bb_colorize
- `TEXT`: text to be printed in color

**Notes:**

This is like colorize but adds \[ and \] around non-printing
characters which are needed specifically in prompts

# Package util/env

Routines for checking and setting environment variables

## `bb_checkset VAR`

Check if an environment variable is set or empty

**Arguments:**

- `VAR`: name of the variable to check (don't include $)

**Returns:** 1 if unset, 2 if set but empty, 0 otherwise

## `bb_iscmd COMMAND`

Check if COMMAND is a valid command

**Arguments:**

- `COMMAND`: name of command to check (e.g., ls)

**Notes:**

This could be an executable in your PATH, or a function or
bash builtin

## `bb_inpath VAR ITEM ...`

Checks if items are in the colon-separated path variable VAR

**Arguments:**

- `VAR`: path variable, e.g. PATH (do not use $)
- `ITEM`: items to find in the path variable

**Returns:** 0 if all items are in the path, 1 otherwise

## `bb_prependpath VAR ITEM ...`

Prepends items to the colon-separated path variable VAR

**Arguments:**

- `VAR`: path variable, e.g. PATH (do not use $)
- `ITEM`: items to add to the path variable

## `bb_appendpath VAR ITEM ...`

Appends items to the colon-separated path variable VAR

**Arguments:**

- `VAR`: path variable, e.g. PATH (do not use $)
- `ITEM`: items to add to the path variable

## `bb_prependpathuniq VAR ITEM ...`

Prepends unique items to the colon-separated path variable VAR

**Arguments:**

- `VAR`: path variable, e.g. PATH (do not use $)
- `ITEM`: items to add to the path variable

**Notes:**

If an item is already in the path, it is not added twice

## `bb_appendpathuniq VAR ITEM ...`

Appends unique items to the colon-separated path variable VAR

**Arguments:**

- `VAR`: path variable, e.g. PATH (do not use $)
- `ITEM`: items to add to the path variable

**Notes:**

If an item is already in the path, it is not added twice

## `bb_removefrompath VAR ITEM ...`

Removes items from the colon-separated path variable VAR

**Arguments:**

- `VAR`: path variable, e.g. PATH (do not use $)
- `ITEM`: items to remove from the path variable

**Returns:** 0 if any item was removed, 1 otherwise

## `bb_swapinpath VAR ITEM1 ITEM2`

Swaps two items in a colon-separated path variable VAR

**Arguments:**

- `VAR`: path variable, e.g. PATH (do not use $)
- `ITEM1`: first item to swap
- `ITEM2`: second item to swap

**Returns:** 
0 if swap is successful,
1 if either ITEM1 or ITEM2 was not in the path
2 if insufficient arguments were supplied (less than 3)
3 for internal error

## `bb_printpath VAR [SEP]`

Prints a path variable separated by SEP, one item per line

**Arguments:**

- `VAR`: path variable, e.g. PATH (do not use $)
- `SEP`: separator character, defaults to :

# Package util/file

Routines for common file operations

## `bb_canonicalize [-v VAR] PATH`

Resolves . and .. in a given absolute path

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `PATH`: an absolute path

**Returns:** 1 if PATH is invalid, 0 otherwise

## `bb_abspath [-v VAR] TARGET [FROM]`

Returns the absolute path from a relative one

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `TARGET`: target relative path (can be file or directory)
- `FROM`: the absolute directory path from which the absolute path is formed
(Defaults to $PWD)

## `bb_relpath [-v VAR] TARGET [FROM]`

Returns the relative path from a directory to the target

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `TARGET`: target absolute path (can be file or directory)
- `FROM`: the absolute directory path from which the relative path is formed
(Defaults to $PWD)

**Returns:** 1 if either TARGET or FROM is invalid, 0 otherwise

## `bb_countlines FILENAME ...`

Counts the number of lines in a list of files

**Arguments:**

- `FILENAME`: a valid filename

**Returns:** 1 if any of the filenames are invalid, 0 otherwise

## `bb_countmatches PATTERN FILENAME ...`

Counts the number of matching lines in a list of files

**Arguments:**

- `PATTERN`: a valid bash regular expression
- `FILENAME`: a valid filename

**Returns:** 1 if any of the filenames are invalid, 0 otherwise

## `bb_extpush EXT FILENAME ...`

Adds the file extension EXT to all given files

**Arguments:**

- `EXT`: the file extension
- `FILENAME`: a valid filename

## `bb_extpop FILENAME ...`

Removes the last file extension from the given files

**Arguments:**

- `FILENAME`: a valid filename

## `bb_hardcopy FILENAME ...`

Replaces symbolic links with deep copies

**Arguments:**

- `FILENAME`: a valid symbolic link

# Package util/kwargs

Routines for parsing keyword arg strings

## `bb_kwparse KEY=VAL ...`

Parses a list of KEY=VAL pairs and stores them into a global dictionary

**Arguments:**

- `KEY=VAL`: a key-value pair separated by =

**Returns:** 1 if there is a malformed key-value pair, 0 otherwise

**Notes:**

kwparse stores key-value pairs into a single, global dictionary

## `bb_kwget [-v VAR] KEY`

Gets the value associated with a key stored with kwparse

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `KEY`: the key

## `bb_kwclear`

Clears the global dictionary

# Package util/list

Routines for common list operations

## `bb_join [-v VAR] SEP ITEM ...`

Joins the list of items into a string with the given separator

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `SEP`: separator
- `ITEM`: a list item 

## `bb_split [-V LISTVAR] SEP STR`

Splits a string into a list based on a separator

**Arguments:**

- `LISTVAR`: list variable to store result (if not given, prints to stdout)
- `SEP`: separator
- `STR`: string to split

## `bb_inlist TARGET LIST ...`

Checks if a target item exists in a given list

**Arguments:**

- `TARGET`: the search target
- `LIST`: a list item

**Returns:** 0 if found, 1 otherwise

## `bb_push LISTVAR ITEM ...`

Pushes an item to a list (stack)

**Arguments:**

- `LISTVAR`: name of the list variable (do not include $)
- `ITEM`: item to push

## `bb_pop LISTVAR`

Pops an item from a list (stack)

**Arguments:**

- `LISTVAR`: name of the list variable (do not include $)

## `bb_unshift LISTVAR ITEM ...`

Unshifts an item from a list (stack)

**Arguments:**

- `LISTVAR`: name of the list variable (do not include $)
- `ITEM`: item to unshift

## `bb_shift LISTVAR`

Shifts an item from a list (stack)

**Arguments:**

- `LISTVAR`: name of the list variable (do not include $)

## `bb_sort [-V LISTVAR] ITEM ...`

Sorts the items of a list in lexicographic ascending order

**Arguments:**

- `LISTVAR`: list variable to store result (if not given, prints to stdout)
- `ITEM`: a list item

## `bb_sortdesc [-V LISTVAR] ITEM ...`

Sorts the items of a list in lexicographic descending order

**Arguments:**

- `LISTVAR`: list variable to store result (if not given, prints to stdout)
- `ITEM`: a list item

## `bb_sortnums [-V LISTVAR] ITEM ...`

Sorts the items of a list in numerical ascending order

**Arguments:**

- `LISTVAR`: list variable to store result (if not given, prints to stdout)
- `ITEM`: a list item

## `bb_sortnumsdesc [-V LISTVAR] ITEM ...`

Sorts the items of a list in numerical descending order

**Arguments:**

- `LISTVAR`: list variable to store result (if not given, prints to stdout)
- `ITEM`: a list item

## `bb_sorthuman [-V LISTVAR] ITEM ...`

Sorts the items of a list in human-readable ascending order

**Arguments:**

- `LISTVAR`: list variable to store result (if not given, prints to stdout)
- `ITEM`: a list item

**Notes:**

Human readable, e.g., 1K, 2M, 3G

## `bb_sorthumandesc [-V LISTVAR] ITEM ...`

Sorts the items of a list in human-readable descending order

**Arguments:**

- `LISTVAR`: list variable to store result (if not given, prints to stdout)
- `ITEM`: a list item

**Notes:**

Human readable, e.g., 1K, 2M, 3G

## `bb_uniq [-V LISTVAR] ITEM ...`

Filters an unsorted list to include only unique items

**Arguments:**

- `LISTVAR`: list variable to store result (if not given, prints to stdout)
- `ITEM`: a list item

## `bb_uniqsorted [-V LISTVAR] ITEM ...`

Filters an sorted list to include only unique items

**Arguments:**

- `LISTVAR`: list variable to store result (if not given, prints to stdout)
- `ITEM`: a list item

**Notes:**

Faster than uniq, but requires the list to be pre-sorted

# Package util/math

Routines for common math operations

## `bb_sum [-v VAR] NUM ...`

Returns the sum of the given numbers

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `NUM`: a valid number

## `bb_min [-v VAR] NUM ...`

Returns the minimum of the given numbers

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `NUM`: a valid number

## `bb_max [-v VAR] NUM ...`

Returns the maximum of the given numbers

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `NUM`: a valid number

## `bb_abs [-v VAR] NUM`

Returns the absolute value of a given number

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `NUM`: a valid number

## `bb_isint NUM ...`

Checks if all the given numbers are valid integers

**Arguments:**

- `NUM`: a number to check

**Returns:** 0 if all arguments are integers, 1 otherwise

## `bb_hex2dec [-V LISTVAR] NUM ...`

Converts numbers from hexademical (base 16) to decimal (base 10)

**Arguments:**

- `LISTVAR`: list variable to store result (if not given, prints to stdout)
- `NUM`: a number to convert

**Returns:** 1 if any number is invalid hexadecimal, 0 otherwise

## `bb_dec2hex [-V LISTVAR] NUM ...`

Converts numbers from decimal (base 10) to hexademical (base 16)

**Arguments:**

- `LISTVAR`: list variable to store result (if not given, prints to stdout)
- `NUM`: a number to convert

**Returns:** 1 if any number is invalid decimal, 0 otherwise

## `bb_oct2dec [-V LISTVAR] NUM ...`

Converts numbers from octal (base 8) to decimal (base 10)

**Arguments:**

- `LISTVAR`: list variable to store result (if not given, prints to stdout)
- `NUM`: a number to convert

**Returns:** 1 if any number is invalid octal, 0 otherwise

## `bb_dec2oct [-V LISTVAR] NUM ...`

Converts numbers from decimal (base 10) to octal (base 8)

**Arguments:**

- `LISTVAR`: list variable to store result (if not given, prints to stdout)
- `NUM`: a number to convert

**Returns:** 1 if any number is invalid decimal, 0 otherwise

# Package util/prof

Routines for runtime profiling of bash scripts

## `bb_startprof LOGFILE`

Starts runtime profiling

**Arguments:**

- `LOGFILE`: (optional) file use to log profiling data
Default: TMPDIR/bbprof.PID.out

**Notes:**

Use the bbprof-read utility script to parse and analyze profile data

## `bb_stopprof`

Stops runtime profiling

# Package util/string

Routines for common string operations

## `bb_lstrip [-v VAR] TEXT`

Strips leading (left) whitespace from text

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `TEXT`: text to strip whitespace from

## `bb_rstrip [-v VAR] TEXT`

Strips trailing (right) whitespace from text

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `TEXT`: text to strip whitespace from

## `bb_strip [-v VAR] TEXT`

Strips leading and trailing whitespace from text

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `TEXT`: text to strip whitespace from

## `bb_ord [-v VAR] CHAR`

Converts character to its ASCII decimal code

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `CHAR`: a single character 

## `bb_chr [-v VAR] CODE`

Converts ASCII decimal code to character

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `CODE`: an integer ASCII character code

## `bb_snake2camel [-v VAR] TEXT`

Converts text from snake to camel case

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `TEXT`: text in snake case

**Notes:**

Leading underscores are preserved

## `bb_camel2snake [-v VAR] TEXT`

Converts text from camel to snake case

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `TEXT`: text in camel case

## `bb_titlecase [-v VAR] TEXT`

Converts text into title case (every word capitalized)

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `TEXT`: text to transform

**Notes:**

This does not check the content of the words itself and may not
respect grammatical rules, e.g. "And" will be capitalized

## `bb_sentcase [-v VAR] TEXT`

Converts text into sentence case (every first word capitalized)

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `TEXT`: text to transform

## `bb_urlencode [-v VAR] TEXT`

Performs URL (percent) encoding on the given string

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `TEXT`: text to be encoded

## `bb_urldecode [-v VAR] TEXT`

Decodes URL-encoded text

**Arguments:**

- `VAR`: variable to store result (if not given, prints to stdout)
- `TEXT`: text to be decoded

**Returns:** 1 if the input URL encoding is malformed, 0 otherwise

# Package util/time

Routines for common time and date operations

## `bb_now [OFFSET ...]`

Returns a timestamp relative to the current time (in seconds after epoch)

**Arguments:**

- `OFFSET`: {+,-}N{s,m,h,d,w} where N is an integer

**Returns:** 1 if any offset is invalid, 0 otherwise

**Notes:**

s: seconds
m: minutes
h: hours
d: days
w: weeks

## `bb_timefmt FORMAT [TIMESTAMP]`

Formats a timestamp into a desired date format

**Arguments:**

- `FORMAT`: date format string, refer to man strftime
- `TIMESTAMP`: epoch time, defaults to current time (now)
